!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery)}(this,function(e){"use strict";function t(e){var t,o,i,r,n,a,s,d={};for(s=0,a=(n=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;s<a&&(-1===(o=n[s]).search(/^(http|https|ftp):\/\//)&&-1!==o.search(":"));s++)t=o.indexOf(":"),i=o.substring(0,t),(r=o.substring(t+1))||(r=void 0),"string"==typeof r&&(r="true"===r||"false"!==r&&r),"string"==typeof r&&(r=isNaN(r)?r:+r),d[i]=r;return null==i&&null==r?e:d}function o(e){var t,o,i,r=(e=""+e).split(/\s+/),n="50%",a="50%";for(i=0,t=r.length;i<t;i++)"left"===(o=r[i])?n="0%":"right"===o?n="100%":"top"===o?a="0%":"bottom"===o?a="100%":"center"===o?0===i?n="50%":a="50%":0===i?n=o:a=o;return{x:n,y:a}}function i(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,o,i){return t+t+o+o+i+i});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}function r(o,i,r){this.$element=e(o),"string"==typeof i&&(i=t(i)),r?"string"==typeof r&&(r=t(r)):r={},this.settings=e.extend({},n,r),this.path=i;try{this.init()}catch(e){if(e.message!==a)throw e}}var n={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",overlay:!1,overlayColor:"#000",overlayAlpha:.3,resizing:!0},a="Not implemented";r.prototype.init=function(){var t,r,n,s=this,d=s.path,p=d,c="",u=s.$element,l=s.settings,v=o(l.position);r=s.$wrapper=e('<div class="vidbg-container">').css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":v.x+" "+v.y}),"object"==typeof d&&(d.poster?p=d.poster:d.mp4?p=d.mp4:d.webm&&(p=d.webm)),r.css("background-image","url("+p+")"),u.css("z-index","1"),u.is("body")&&r.css({position:"fixed"}),u.prepend(r),"object"==typeof d?(d.mp4&&(c+='<source src="'+d.mp4+'" type="video/mp4">'),d.webm&&(c+='<source src="'+d.webm+'" type="video/webm">'),t=s.$video=e("<video>"+c+"</video>")):t=s.$video=e('<video><source src="'+d+'" type="video/mp4"><source src="'+d+'" type="video/webm"></video>');try{t.prop({autoplay:l.autoplay,loop:l.loop,volume:l.volume,muted:l.muted,defaultMuted:l.muted,playbackRate:l.playbackRate,defaultPlaybackRate:l.playbackRate})}catch(e){throw new Error(a)}t.css({margin:"auto",position:"absolute","z-index":-1,top:v.y,left:v.x,"-webkit-transform":"translate(-"+v.x+", -"+v.y+")","-ms-transform":"translate(-"+v.x+", -"+v.y+")","-moz-transform":"translate(-"+v.x+", -"+v.y+")",transform:"translate(-"+v.x+", -"+v.y+")","max-width":"none",visibility:"hidden",opacity:0}).one("canplaythrough.vidbg",function(){s.resize()}).one("playing.vidbg",function(){t.css({visibility:"visible",opacity:1}),r.css("background-image","none")}),u.on("resize.vidbg",function(){l.resizing&&s.resize()}),r.append(t),n=s.$overlay=e('<div class="vidbg-overlay">').css({position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba("+i(l.overlayColor).r+", "+i(l.overlayColor).g+", "+i(l.overlayColor).b+", "+l.overlayAlpha+")"}),l.overlay&&r.append(n)},r.prototype.getVideoObject=function(){return this.$video[0]},r.prototype.resize=function(){if(this.$video){var e=this.$wrapper,t=this.$video,o=t[0],i=o.videoHeight,r=o.videoWidth,n=e.height(),a=e.width();a/r>n/i?t.css({width:a+2,height:"auto"}):t.css({width:"auto",height:n+2})}},r.prototype.destroy=function(){delete e.vidbg.lookup[this.index],this.$video&&this.$video.off("vidbg"),this.$element.off("vidbg").removeData("vidbg"),this.$wrapper.remove()},e.vidbg={lookup:[]},e.fn.vidbg=function(t,o){var i;return this.each(function(){(i=e.data(this,"vidbg"))&&i.destroy(),(i=new r(this,t,o)).index=e.vidbg.lookup.push(i)-1,e.data(this,"vidbg",i)}),this},e(document).ready(function(){var t=e(window);t.on("resize.vidbg",function(){for(var t,o=e.vidbg.lookup.length,i=0;i<o;i++)(t=e.vidbg.lookup[i])&&t.settings.resizing&&t.resize()}),t.on("unload.vidbg",function(){return!1}),e(document).find("[data-vidbg-bg]").each(function(t,o){var i=e(o),r=i.data("vidbg-options"),n=i.data("vidbg-bg");i.vidbg(n,r)})})});